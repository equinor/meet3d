<!DOCTYPE html>
<html>
	<head>
		<link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon">
		<title>3D Conference</title>
		<meta charset="UTF-8" />
		<link rel="stylesheet" href="index.css">
		<style>
			body { margin: 0; }
			canvas { display: block; }
		</style>
	</head>
	<body>
		<div id="chatSection">
			<h1>3D Conferencing with WebRTC and ThreeJS</h1>

			<room>
				<div>
					Username: &ensp;
					<input type="text" id="username" placeholder="Enter a username here!"></input>
				</div>

				<div>
					Room name:
					<input type="text" id="roomName" placeholder="Enter a room name here!"></input>
					<input type="button" id="start" onclick="init()" value="Open room"></input>
					<button id="leaveButton" onclick="leave()" hidden>Leave Room</button>
				</div>
			</room>

			<br/>

			<chat id="chatBox" hidden>
				<ul id="chatReceive">
					<!-- New chat messages go here -->
				</ul>
				<input type="text" id="chatSend" style="width:490px;" placeholder="Type a message here! Use @username to message a specific user"></input>
				<input type="button" onclick="sendChat()" value="Send"></input>
			</chat>

			<div class="users" id="users" hidden>
				<p> &ensp; Other users in the room:</p>
				<ul id="connectionList">
				</ul>
			</div>

			<br/>

			<files id="files" hidden>
				Your Files:
				<br/>
				<br/>
				<uploadFile>
	      	<input type="file" id="sendFile" multiple>
	      	<button onclick="advertiseFile()" id="uploadButton">Share File</button>
				</uploadFile>
				<p id="remoteFiles" hidden> Remote Files: </p>
	    </files>

			<received id="received">
				Received Files:
				<br/>
				<a id="download" target="_blank" hidden>Download file</a>
			</received>

			<video controls muted id="localVideo" autoplay playsinline hidden></video>
			<div id="video" hidden>
				<!-- Received video streams go here -->
			</div>

		</div>

		<input type="button" id="open" onclick="open3D()" value="Open Chat" hidden></input>

		<input type="button" id="shareButton" onclick="shareScreen()" value="Share Screen" hidden></input>

		<div id="3D">
			<notification id="notification"></notification>
			<!-- This is where the 3D canvas goes -->
		</div>

		<video id="screenShare" style="border: 1px solid #999; width: 98%; max-width: 860px;" hidden autoplay></video>

	  <script src="socket.io.js"></script>
	  <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
		<script src="connect.js"></script>
	  <script src="client.js"></script>
		<script src="three.js"></script>
		<script src="OrbitControls.js"></script>
		<script src="https://threejs.org/examples/js/loaders/GLTFLoader.js"></script>
		<script src="3D.js"></script>
	</body>
</html>
